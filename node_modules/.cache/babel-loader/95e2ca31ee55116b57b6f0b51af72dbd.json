{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/home/swapnil/reactproj/pro/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/swapnil/reactproj/pro/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/swapnil/reactproj/pro/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/swapnil/reactproj/pro/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/swapnil/reactproj/pro/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/swapnil/reactproj/pro/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/swapnil/reactproj/pro/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/swapnil/reactproj/pro/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import AppBody from'../../../../components/AppBody';import Loader from'react-loader-spinner';import FlashMessage from'react-flash-message';import helper from'../../../../utils/helper';import axios from'axios';var user=helper.user();var AddBlog=/*#__PURE__*/function(_Component){_inherits(AddBlog,_Component);var _super=_createSuper(AddBlog);function AddBlog(props){var _this;_classCallCheck(this,AddBlog);_this=_super.call(this,props);_this.handleChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.imageChangeHandler=function(e){_this.setState(_defineProperty({},e.target.name,e.target.files[0]));console.log(_this.state.blog_image);axios.defaults.headers.common['Authorization']=\"Bearer \".concat(user.access_token);axios.post('http://indonews.live/api/upload',{headers:{\"Authorization\":\"Bearer \".concat(user.access_token)},blog_image:_this.state.blog_image,blog_video:_this.state.blog_video}).then(function(res){console.log(res);});};_this.addBlogHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _this$state,title,description,language,category,blog_image,blog_video,blog_video_url,blog_image_url;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$state=_this.state,title=_this$state.title,description=_this$state.description,language=_this$state.language,category=_this$state.category,blog_image=_this$state.blog_image,blog_video=_this$state.blog_video,blog_video_url=_this$state.blog_video_url,blog_image_url=_this$state.blog_image_url;// const blogImageRes = await axios.post('http://indonews.live/api/upload', {\n//     headers: { \"Authorization\": `Bearer ${user.access_token}` },\n//     blog_image: blog_image,\n//     blog_video: blog_video,\n// });\n// if (blogImageRes.status === 200) {\n//     this.setState({ blog_image_url: blogImageRes.blog_image, blog_video_url: blogImageRes.blog_video })\n//     console.log(blogImageRes);\n// } else {\n//     console.log(\"error\")\n// }\ntry{_this.setState({loading:true});axios.defaults.headers.common['Authorization']=\"Bearer \".concat(user.access_token);axios.post('http://indonews.live/api/create-blog',{headers:{\"Authorization\":\"Bearer \".concat(user.access_token)},title:title,contents:description,language_id:language,category_id:category}).then(function(res){console.log(res);_this.setState({loading:false,error:true,errorMessage:'Blog added successfully !'});}).catch(function(err){console.log(err);_this.setState({loading:false});});}catch(error){console.log(error);}case 2:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.state={categoryApi:[],languageApi:[],category_id:'',language_id:'',title:'',heading:'',description:'',category:'',language:'',blog_image:'',blog_video:'',blog_image_url:'',blog_video_url:'',loading:true,error:false,errorMessage:''};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));return _this;}_createClass(AddBlog,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.get('http://indonews.live/api/categories-languages',{headers:{\"Authorization\":\"Bearer \".concat(user.access_token)}}).then(function(res){_this2.setState({languageApi:res.data.Language});_this2.setState({categoryApi:res.data.Category,loading:false});}).catch(function(err){_this2.setState({loading:false});});}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsx(AppBody,{loader:this.state.loading,content:/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-2\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-8\",children:this.state.error?/*#__PURE__*/_jsx(FlashMessage,{duration:5090,persistOnHover:true,children:/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-warning alert-dismissible fade show\",role:\"alert\",children:[/*#__PURE__*/_jsx(\"strong\",{children:this.state.errorMessage}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"close\",\"data-dismiss\":\"alert\",\"aria-label\":\"Close\",children:/*#__PURE__*/_jsx(\"span\",{\"aria-hidden\":\"true\",children:\"\\xD7\"})})]})}):null})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-8 card mt-1 mb-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header bg-white text-center\",children:/*#__PURE__*/_jsx(\"h2\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Add Blog\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"form\",{action:\"\",encType:\"\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"language\",children:\"Select language\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"language\",id:\"language\",className:\"form-control\",onChange:function onChange(e){_this3.handleChange(e);},children:[/*#__PURE__*/_jsx(\"option\",{value:null,children:\"Select --\"}),this.state.languageApi.map(function(lang){return/*#__PURE__*/_jsx(\"option\",{value:lang.id,children:lang.title});})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category\",children:\"Select Category\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"category\",id:\"category\",className:\"form-control\",onChange:function onChange(e){_this3.handleChange(e);},children:[/*#__PURE__*/_jsx(\"option\",{value:null,children:\"Select --\"}),this.state.categoryApi.map(function(cat){return/*#__PURE__*/_jsx(\"option\",{value:cat.id,children:cat.title});})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"title\",name:\"title\",className:\"form-control\",onChange:function onChange(e){_this3.handleChange(e);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",id:\"description\",cols:\"30\",rows:\"5\",className:\"form-control\",style:{resize:'none'},onChange:function onChange(e){_this3.handleChange(e);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"blog_image\",id:\"\",className:\"form-control\",onChange:function onChange(e){_this3.imageChangeHandler(e);}})})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsx(\"img\",{src:\"\",alt:\"\",id:\"image\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-footer bg-white\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-info form-control\",type:\"button\",onClick:this.addBlogHandler,children:\"Publish\"})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"form-control btn btn-warning\",onClick:this.refresh,children:\"Refrsh\"})]})]})]})]})})});}}]);return AddBlog;}(Component);export default AddBlog;","map":{"version":3,"sources":["/home/swapnil/reactproj/pro/src/container/app/blog/component/AddBlog.js"],"names":["React","Component","AppBody","Loader","FlashMessage","helper","axios","user","AddBlog","props","handleChange","e","setState","target","name","value","imageChangeHandler","files","console","log","state","blog_image","defaults","headers","common","access_token","post","blog_video","then","res","addBlogHandler","title","description","language","category","blog_video_url","blog_image_url","loading","contents","language_id","category_id","error","errorMessage","catch","err","categoryApi","languageApi","heading","bind","get","data","Language","Category","map","lang","id","cat","resize","refresh"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport AppBody from '../../../../components/AppBody';\nimport Loader from 'react-loader-spinner';\nimport FlashMessage from 'react-flash-message'\nimport helper from '../../../../utils/helper';\nimport axios from 'axios';\n\nconst user = helper.user();\n\nclass AddBlog extends Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            categoryApi: [],\n            languageApi: [],\n            category_id: '',\n            language_id: '',\n            title: '',\n            heading: '',\n            description: '',\n            category: '',\n            language: '',\n            blog_image: '',\n            blog_video: '',\n            blog_image_url: '',\n            blog_video_url: '',\n            loading: true,\n            error: false,\n            errorMessage: ''\n        }\n        this.handleChange = this.handleChange.bind(this);\n\n    }\n\n    componentDidMount() {\n\n        axios.get('http://indonews.live/api/categories-languages', {\n            headers: { \"Authorization\": `Bearer ${user.access_token}` }\n        }).then(res => {\n            this.setState({ languageApi: res.data.Language })\n            this.setState({ categoryApi: res.data.Category, loading: false })\n\n        }).catch(err => {\n            this.setState({ loading: false })\n        });\n\n    }\n\n    handleChange = (e) => { this.setState({ [e.target.name]: e.target.value }) }\n\n    imageChangeHandler = (e) => {\n        this.setState({ [e.target.name]: e.target.files[0] })\n        console.log(this.state.blog_image)\n        axios.defaults.headers.common['Authorization'] = `Bearer ${user.access_token}`;\n        axios.post('http://indonews.live/api/upload', {\n            headers: { \"Authorization\": `Bearer ${user.access_token}` },\n            blog_image: this.state.blog_image,\n            blog_video: this.state.blog_video,\n\n        }).then(res => {\n            console.log(res)\n        })\n    }\n\n    addBlogHandler = async (e) => {\n        const { title, description, language, category, blog_image, blog_video, blog_video_url, blog_image_url } = this.state;\n\n\n        // const blogImageRes = await axios.post('http://indonews.live/api/upload', {\n        //     headers: { \"Authorization\": `Bearer ${user.access_token}` },\n        //     blog_image: blog_image,\n        //     blog_video: blog_video,\n\n        // });\n        // if (blogImageRes.status === 200) {\n        //     this.setState({ blog_image_url: blogImageRes.blog_image, blog_video_url: blogImageRes.blog_video })\n        //     console.log(blogImageRes);\n        // } else {\n        //     console.log(\"error\")\n        // }\n\n        try {\n            this.setState({ loading: true })\n            axios.defaults.headers.common['Authorization'] = `Bearer ${user.access_token}`;\n            axios.post('http://indonews.live/api/create-blog', {\n                headers: { \"Authorization\": `Bearer ${user.access_token}` },\n                title: title,\n                contents: description,\n                language_id: language,\n                category_id: category,\n            }).then(res => {\n                console.log(res)\n                this.setState({ loading: false, error: true, errorMessage: 'Blog added successfully !' })\n            }).catch(err => {\n                console.log(err)\n                this.setState({ loading: false })\n            })\n        } catch (error) {\n            console.log(error)\n        }\n\n    }\n\n    render() {\n\n        return (\n            <AppBody\n                loader={this.state.loading}\n                content={\n                    <>\n\n                        <div className=\"container mt-4\">\n                            <div className=\"row\">\n                                <div className=\"col-2\"></div>\n                                <div className=\"col-8\">\n                                    {\n                                        this.state.error ?\n                                            <FlashMessage duration={5090} persistOnHover={true}>\n                                                <div className=\"alert alert-warning alert-dismissible fade show\" role=\"alert\">\n                                                    <strong>{this.state.errorMessage}</strong>\n                                                    <button type=\"button\" className=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\n                                                        <span aria-hidden=\"true\">&times;</span>\n                                                    </button>\n                                                </div>\n                                            </FlashMessage>\n                                            :\n                                            null\n                                    }\n                                </div>\n                            </div>\n                            <div className=\"row\">\n                                <div className=\"col-md-2\"></div>\n                                <div className=\"col-md-8 card mt-1 mb-5\">\n                                    <div className=\"card-header bg-white text-center\">\n                                        <h2><strong>Add Blog</strong></h2>\n                                    </div>\n                                    <div className=\"card-body\">\n                                        <form action=\"\" encType=\"\">\n                                            <div className=\"row\">\n                                                <div className=\"col\">\n                                                    <div className=\"form-group\">\n                                                        <label htmlFor=\"language\">Select language</label>\n                                                        <select name=\"language\" id=\"language\" className=\"form-control\" onChange={e => { this.handleChange(e) }}>\n                                                            <option value={null}>Select --</option>\n                                                            {this.state.languageApi.map(lang => {\n                                                                return <option value={lang.id}>{lang.title}</option>\n                                                            })}\n                                                        </select>\n                                                    </div>\n                                                </div>\n                                                <div className=\"col\">\n                                                    <div className=\"form-group\">\n                                                        <label htmlFor=\"category\">Select Category</label>\n                                                        <select name=\"category\" id=\"category\" className=\"form-control\" onChange={e => { this.handleChange(e) }}>\n                                                            <option value={null}>Select --</option>\n                                                            {this.state.categoryApi.map(cat => {\n                                                                return <option value={cat.id}>{cat.title}</option>\n                                                            })}\n                                                        </select>\n                                                    </div>\n                                                </div>\n                                            </div>\n\n                                            <div className=\"form-group\">\n                                                <label htmlFor=\"title\">Title</label>\n                                                <input type=\"text\" id=\"title\" name=\"title\" className=\"form-control\" onChange={e => { this.handleChange(e) }} />\n                                            </div>\n                                            <div className=\"form-group\">\n                                                <label htmlFor=\"description\">Description</label>\n                                                <textarea name=\"description\" id=\"description\" cols=\"30\" rows=\"5\" className=\"form-control\" style={{ resize: 'none' }} onChange={e => { this.handleChange(e) }}></textarea>\n                                            </div>\n\n                                            <div className=\"row\">\n                                                <div className=\"form-group\">\n                                                    <input type=\"file\" name=\"blog_image\" id=\"\" className=\"form-control\" onChange={e => { this.imageChangeHandler(e) }} />\n                                                </div>\n                                            </div>\n                                            <div className=\"row\">\n                                                <div className=\"col-12\">\n                                                    <img src=\"\" alt=\"\" id=\"image\" />\n                                                </div>\n                                            </div>\n\n                                            <div className=\"card-footer bg-white\">\n                                                <button className=\"btn btn-info form-control\" type=\"button\" onClick={this.addBlogHandler}>Publish</button>\n                                            </div>\n                                        </form>\n                                        <button className=\"form-control btn btn-warning\" onClick={this.refresh}>Refrsh</button>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </>\n                }\n\n            />\n        )\n    }\n}\n\nexport default AddBlog;"]},"metadata":{},"sourceType":"module"}